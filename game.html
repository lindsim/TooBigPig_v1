<!DOCTYPE html>
<html>
<header>
	<link rel="stylesheet" href="style.css"/>
</header>
<body>
	<p class="center">Too Big Pig <img src="images/pigface.png" id="pigface"></p>
	<div class="gameContain">
		<img src="images/fullpig.png" id="failpig">
			
		<div class="controls">

			<input type="text" id="userGuess" class="textBox" name="guess" placeholder="How big pig?"/>
			<button id="submit" class="pigButt">Pig Magic!</button>
			<button id="next" class="pigButt">Next</button>
			<button id="quit" class="quitButt">Quit</button>
			<button id="start" class="startButt">New Game</button>
			<div class="end">
					
			</div>
		
		</div>
			<div class="messages">
				<div class="scoreMessage">
					<p id="scoreMessage" class="wrap"></p>
				</div>
				<div class="results">
					<p id="gameResult" class="wrap"></p>
				</div>
				<div class="end">
					<p id="gameOver" class="wrap"></p>
				</div>

		</div>
			
		
		<main class="stage">
			<img src="images/field.png" width="100%" id="field">
			<img src="images/mud.png" id="mud">
			<img src="images/pig_happy.png" id="shades">
			
		
		</main>

	</div>

<script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
<script>

var best_pig = 100;
var pig = "images/pigface.png";
var box = 0;
var score = 0;

$('#shades').hide();
$('#mud').hide();
$('#failpig').hide();
$('#userGuess').hide();
$('#submit').hide();
$('#next').hide();
$('#quit').hide();
$('#scoreMessage').hide();

$(document).ready(function(){
	$('#gameResult').text('Let\'s play!');
	$('#start').click(newGame);
	$('#quit').click(endGame);
	$('#pigface').click(swapFace);
	$('#submit').click(scoreIt);
	$('#next').click(newPond);
});


var newGame = function(){
	if (box != 1){
		score = 0;
		$('#failpig').hide();
	 	$('#userGuess').show();
	 	$('#quit').show();
	 	$('#submit').show();
		$('#scoreMessage').text("Score:" + score);
		$('#scoreMessage').show();
		$('#start').hide();
		$('#userGuess').val("");
		box = 1;
		newPond();
	}
};

var endGame = function(){
	box = 0;
	$('#next').hide();
	$('#userGuess').hide();
	$('#submit').hide();
	$('#start').show();
	$('#quit').hide();
	$('#shades').hide();
	$('#mud').hide();
	$('#gameOver').text('Game Over.');
	$('#gameOver').show();
	$('#scoreMessage').text('Score:' + score);
};

var newPond = function(){
	$('#failpig').hide();
	$('#gameResult').hide();
	$('#gameOver').hide();
	$('#next').hide();
	$('#shades').hide();
	$('#submit').show();
	$('#userGuess').show();
	$('#userGuess').val("");
	var r = Math.random()*(100 - 10) + 10;
	$('#mud').attr('width', ( 620 * r/100));
	$('#mud').show();
	best_pig = r;
}

var swapFace = function(){
	if (pig == "images/pigface.png"){
		pig = "images/winkpig.png";
	}
	else if (pig == "images/winkpig.png"){
		pig = "images/pigface.png";
	}

	$(this).attr('src', pig);
}


var scoreIt = function() {
 	var guess = $('#userGuess').val();

	if(guess > best_pig){
		$('#gameResult').show();
		$('#gameResult').text("TOO BIG PIG!");
		$('#failpig').show()
		endGame();
		}

	else if (guess == 0){
		alert('No size zero pigs! Pig magic works from 10 to 100.  Try again.');
	}

	else if (guess < best_pig && guess > 0){
		$('#gameResult').text('The pig fits!');
		$('#gameResult').show();
		var newPoints = Math.round((1000 * (guess/best_pig)));
		score += newPoints;
		$('#submit').hide();
		$('#next').show();
		$('#shades').attr('width', (guess * 2));
		$('#shades').show();
		$('#scoreMessage').text("Score:" + score);
		}

	else if (guess == best_pig){
		$('#gameResult').show();
		$('#gameResult').text('Perfect pig!!!');
		score += 1250;
		$('#submit').hide();
		$('#next').show();
		$('#shades').attr('width', (8 * r/100));
		$('#shades').show();
		$('#scoreMessage').text("Score:" + score);
		}

	else {
		alert('That pig can\'t exist. Pig magic works from 10 to 100. Try again.');
	}
}
</script>
</body>
</html>
